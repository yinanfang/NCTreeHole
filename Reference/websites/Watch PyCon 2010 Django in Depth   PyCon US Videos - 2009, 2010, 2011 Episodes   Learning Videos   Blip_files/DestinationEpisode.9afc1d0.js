BLIP.Class.create("BLIP.Unit.BlipPicks",BLIP.Unit,function(config){BLIP.Unit.call(this,config);},{selector:"#BlipPicks",cache:{},genres:[],hidden:false,autoAdvanceInterval:6000,currentGenre:0,init:function(){this.initContents();this.initEvents();this.initAnalytics();this.posterCards=this.initSubUnit(BLIP.Unit.PosterCard);},initContents:function(){this.formatGenreColumns();this.populateGenresArray();this.loadRandomGenre();},initEvents:function(){var thisContext=this,visibilityChange;if(typeof document.hidden!=="undefined"){this.hidden="hidden";visibilityChange="visibilitychange";}else{if(typeof document.mozHidden!=="undefined"){this.hidden="mozHidden";visibilityChange="mozvisibilitychange";}else{if(typeof document.msHidden!=="undefined"){this.hidden="msHidden";visibilityChange="msvisibilitychange";}else{if(typeof document.webkitHidden!=="undefined"){this.hidden="webkitHidden";visibilityChange="webkitvisibilitychange";}}}}if(document.addEventListener&&Function.prototype.bind){document.addEventListener(visibilityChange,this.onVisibilityChanged.bind(this));
}else{$(window).blur(function(){document[thisContext.hidden]=true;thisContext.onVisibilityChanged();});$(window).focus(function(){document[thisContext.hidden]=false;thisContext.onVisibilityChanged();});}this.domRoot.find(".genres").delegate("a","click",{thisContext:this},this.onGenreButtonClick);this.domRoot.find(".browse-button").bind("click",function(){});this.domRoot.children(".wrap").bind("mouseenter",function(event){thisContext.pauseAutoplayInterval();});this.domRoot.children(".wrap").bind("mouseleave",function(event){thisContext.startAutoplayInterval();});this.startAutoplayInterval();},initAnalytics:function(){var thisContext=this;this.domRoot.find(".browse-button a").click(function(event){event.preventDefault();thisContext.fireEvent("homepageBlipPicksCategory.click",{link:this,horizontal:false});});this.domRoot.find(".genres a").click(function(event){event.preventDefault();});},populateGenresArray:function(){var thisContext=this;$("ul.genres a").each(function(i,element){thisContext.genres.push({button:$(element),channelId:$(element).data("channel-id")});
});},formatGenreColumns:function(){var list=$(".BlipPicksCategories .browse-genres li"),listLength=list.length,columnLength=Math.floor(listLength/2)+listLength%2,fragment=document.createDocumentFragment(),i=0,currentColumn=null;list.each(function(n,el){if(n%columnLength===0){if(currentColumn){fragment.appendChild(currentColumn[0]);}currentColumn=$("<ul class='Column'>");$(el).addClass("First");}currentColumn.append(el);});if(currentColumn.find("li").length){fragment.appendChild(currentColumn[0]);}$(".BlipPicksCategories .browse-genres").remove();$(".BlipPicksCategories").append(fragment);},loadRandomGenre:function(){var randomIndex=Math.floor(Math.random()*this.genres.length),genres=this.genres[randomIndex];this.currentGenre=randomIndex;this.loadGenre(genres);},onGenreButtonClick:function(event){var button=$(event.currentTarget),channelId=button.data("channel-id"),thisContext=event.data.thisContext;event.preventDefault();if(button.hasClass("active")||button.hasClass("loading")){return;}thisContext.loadGenre({button:button,channelId:channelId});
},onVisibilityChanged:function(event){if(document[this.hidden]){this.pauseAutoplayInterval();}else{this.startAutoplayInterval();}},loadGenre:function(genre){genre.button.closest("ul").find(".active").removeClass("active");genre.button.removeClass("loading").addClass("active");this.domRoot.find(".featured-shows").hide();this.domRoot.find('.featured-shows[data-channel-id="'+genre.channelId+'"]').show();},nextGenre:function(){this.currentGenre++;if(this.currentGenre>this.genres.length-1){this.currentGenre=0;}this.loadGenre(this.genres[this.currentGenre]);},startAutoplayInterval:function(){var thisContext=this;this.slideInterval=setInterval(function(){thisContext.nextGenre();},this.autoAdvanceInterval);},pauseAutoplayInterval:function(){clearInterval(this.slideInterval);}});BLIP.Class.create("BLIP.Unit.CopyLink",BLIP.Unit,function(config){BLIP.Unit.call(this,config);},{selector:".CopyLink",zeroClipboardPath:"/scripts/flash/ZeroClipboard.swf",init:function(){if(/iPhone|iPad|iOS|Android/.test(navigator.userAgent)){this.domRoot.hide();
}else{this.initZeroClip();}},initZeroClip:function(){var clip,thisContext=this;ZeroClipboard.setMoviePath(this.zeroClipboardPath);clip=this.clip=new ZeroClipboard.Client();clip.setHandCursor(true);clip.setCSSEffects(true);clip.setText(this.domRoot.data("cliptext"));clip.addEventListener("complete",this.delegate(this.on_clipComplete));clip.addEventListener("mouseOver",function(){thisContext.domRoot.addClass("hover");});clip.addEventListener("mouseOut",function(){thisContext.domRoot.removeClass("hover");});this.domRoot.parent().find(".ZClip").html(clip.getHTML(this.domRoot.outerWidth(false),this.domRoot.outerHeight(false)));},on_clipComplete:function(){var noteText=this.domRoot.data("notetext"),type=this.domRoot.data("analytics"),parent=this.domRoot.parent("div"),notification=$("<div>").addClass("TooltipTarget").addClass("ClipNotification").html(noteText);parent.addClass("Copied");parent.append(notification);notification.fadeIn(function(){setTimeout(function(){parent.removeClass("Copied");
setTimeout(function(){notification.remove();},600);},1250);});this.fireEvent([type,"copied"].join("."),$("#PageInfo").data("episode-title"));}});BLIP.Class.create("BLIP.Unit.EpisodeEndcap",BLIP.Unit,function(config){BLIP.Unit.call(this,config);},{selector:".EpisodeEndcap",bridgeCountDown:10,finalCountDown:10,setUpNextId:function(id){this.upNextId=id;},setIsBridgeEndcap:function(isBridge){this.isBridge=isBridge;if(isBridge){this.domRoot.addClass("EpBridge");}},setSecondsLeft:function(secondsLeft){var contents,timeLeft=this.domRoot.find("#EndcapTimeLeft");timeLeft.html(secondsLeft);if(secondsLeft<2){contents=timeLeft.parent();contents.html(contents.html().replace(" seconds"," second"));}},getUpNextId:function(){return this.isBridge?this.upNextId:this.domRoot.find(".Endcap").attr("data-first-episode");},init:function(){this.initEvents();},initEvents:function(){this.contentLoaded=new BLIP.Utils.LocalEvent("ContentLoaded");this.addEventListener("pause",this.delegate(this.onPause));this.addEventListener("CommentsOpen",this.delegate(this.onCommentsOpen));
this.addEventListener("CommentsClose",this.delegate(this.onCommentsClose));},load:function(){$.get(this.domRoot.attr("data-src"),this.delegate(this.on_domLoaded));},onCommentsOpen:function(){this.commentsOpen=true;},onCommentsClose:function(){this.commentsOpen=false;},onPause:function(){this.paused=true;this.stopSkipCountdown();},on_domLoaded:function(dom){this.attachDom(dom);this.contentLoaded.fire();this.initSubUnits();this.initSubEvents();this.initTrackingCodes();},buildEndcapTrackedUrl:function(anchor,content){BLIP.Utils.buildTrackedUrl(anchor,"ep_player","endcap",content,"vps");},initTrackingCodes:function(){var thisContext=this;try{this.buildEndcapTrackedUrl(this.domRoot.find(".EndcapEpThumbnail"),"ep_thumb");this.buildEndcapTrackedUrl(this.domRoot.find(".EndcapEpTitle a"),"ep_title");this.buildEndcapTrackedUrl(this.domRoot.find(".StartWatchingButton"),"start");}catch(x){}this.domRoot.find(".RecoSeries .RecoSeriesPoster").each(function(n,el){thisContext.buildEndcapTrackedUrl($(el),"ser_poster");
});this.domRoot.find(".RecoSeries .RecoSeriesTitle").each(function(n,el){thisContext.buildEndcapTrackedUrl($(el),"ser_title");});},attachDom:function(dom){if(!this.domRoot.find("div").length){this.domRoot.html(dom);this.loadUpNext();}},initSubUnits:function(){this.cullRecommendations();this.recommendations=this.initSubUnit(BLIP.Unit.EndcapPagination).single();},initSubEvents:function(){this.recommendations.actionTaken.addListener(this.on_recommendationActionTaken,this);},on_recommendationActionTaken:function(){this.stopSkipCountdown();},cullRecommendations:function(){var currentShowId=$("#PageInfo").attr("data-users-id");this.domRoot.find(".Slider a[data-id="+currentShowId+"]").remove();this.domRoot.find(".Slot").each(this.delegate(function(n,slot){this.cullSlot(n,slot);}));},cullSlot:function(n,slot){var reccos=$(slot).find(".RecoSeries"),choice=Math.floor(Math.random()*reccos.length);reccos.eq(choice).remove();},isCountdownDisabled:function(){return(this.commentsOpen||this.paused);},loadUpNext:function(){var container=this.domRoot.find("#EndcapNextEpContents"),url=new BLIP.Utils.UrlBuilder(container.attr("data-src"));
url.addParam("posts_id",this.getUpNextId());$.get(url.getFullUrl(),this.delegate(this.on_upNextLoaded));},on_upNextLoaded:function(dom){this.domRoot.find("#EndcapNextEpContents").append(dom);this.initTrackingCodes();this.contentLoaded.fire();},show:function(){this.domRoot.show();},startSkipCountdown:function(){var secondsToWait=(this.isBridge?this.bridgeCountDown:this.finalCountDown),thisContext=this;this.setSecondsLeft(secondsToWait);this.skipCountdown=setInterval(function(){if(thisContext.isCountdownDisabled()){return;}secondsToWait--;if(secondsToWait>0){thisContext.setSecondsLeft(secondsToWait);}else{thisContext.skipToNextEpisode();}},1000);},stopSkipCountdown:function(){clearInterval(this.skipCountdown);},skipToNextEpisode:function(){this.stopSkipCountdown();window.location="/episode/"+this.getUpNextId();}});BLIP.Class.create("BLIP.Unit.EpisodeEndcap.EpisodeEndcapLite",BLIP.Unit.EpisodeEndcap,function(config){BLIP.Unit.EpisodeEndcap.call(this,config);this.excluded=[];this.excluded.push($("#PageInfo").attr("data-posts-id"));
},{selector:".EpisodeEndcapLite",attachDom:function(dom){$("#PlayerEmbed").hide();$(dom).find(".Recent .EndcapEpOption, .Popular .EndcapEpOption").hide();this.domRoot.html(dom);},buildEndcapTrackedUrl:function(anchor,content){BLIP.Utils.buildTrackedUrl(anchor,"lt_ep_player","endcap",content,"vps");},initSuggestEpisodes:function(){var recent=this.domRoot.find(".EndcapMoreFromShowList .Recent .EndcapEpOption"),popular=this.domRoot.find(".EndcapMoreFromShowList .Popular .EndcapEpOption"),i,len,popularChosen=false,recentChosen=false,id,item;for(i=0,len=recent.length;i<len&&!recentChosen;i++){item=$(recent[i]);if(!this.isInArray(item.attr("data-id"),this.excluded)){id=item.attr("data-id");this.excluded.push(id);recentChosen=true;item.show();}}for(i=0,len=popular.length;i<len&&!popularChosen;i++){item=$(popular[i]);if(!this.isInArray(item.attr("data-id"),this.excluded)){id=item.attr("data-id");this.excluded.push(id);popularChosen=true;item.show();}}if(popularChosen?!recentChosen:recentChosen){this.domRoot.addClass("SingleOwnEpisode");
}else{if(!popularChosen&&!recentChosen){this.domRoot.addClass("NoOwnEpisode");}}},isInArray:function(val,arr){var i,len;for(i=0,len=arr.length;i<len;i++){if(arr[i]===val){return true;}}return false;},initSubUnits:function(){this.initSuggestEpisodes();BLIP.Unit.EpisodeEndcap.prototype.initSubUnits.call(this);},initSubEvents:function(){}});BLIP.Class.create("BLIP.Unit.EndcapPagination",BLIP.Unit,function(config){BLIP.Unit.call(this,config);},{selector:".EndcapRecoContent",init:function(){this.initContents();this.initEvents();},initContents:function(){this.slider=this.domRoot.find(".Slider");this.container=this.domRoot.find("#EndcapRecoSeries");this.items=this.domRoot.find(".RecoSeries");this.pageRightButton=this.domRoot.find('.Pagination a[rel="next"]');this.pageLeftButton=this.domRoot.find('.Pagination a[rel="previous"]');this.numberOfPages=this.getNumberOfPages();this.sliderWidth=this.getSliderWidth();this.slider.width(this.sliderWidth);this.currentPage=0;if(this.items.length<2){this.domRoot.addClass("SingleReco");
}this.updateArrowOpacity();},getNumberOfPages:function(){return Math.ceil(this.getItemsWidth()/this.getPageWidth());},getSliderWidth:function(){return this.numberOfPages*this.getPageWidth();},getPageWidth:function(){return this.container.innerWidth();},getItemsWidth:function(){var sumCssProperties=function(element,properties){var total=0,i=0,len=properties.length;for(;i<len;i++){total+=parseInt(element.css(properties[i]),10);}return total;},exampleItem=this.items.eq(0);calculatedWidth=sumCssProperties(exampleItem,["padding-left","padding-right","margin-left","margin-right"])+exampleItem.width();return calculatedWidth*(this.items.length);},initEvents:function(){this.pageRightButton.bind("click",this.delegate(this.pageRightButton_onClick));this.pageLeftButton.bind("click",this.delegate(this.pageLeftButton_onClick));this.actionTaken=new BLIP.Utils.LocalEvent("ActionTaken");},pageRightButton_onClick:function(){this.pageTo(this.currentPage+1);},pageLeftButton_onClick:function(){this.pageTo(this.currentPage-1);
},pageTo:function(pageNumber){if(pageNumber>=0&&pageNumber<this.numberOfPages){this.slider.animate({left:pageNumber*this.getPageWidth()*-1});this.currentPage=pageNumber;this.actionTaken.fire();this.updateArrowOpacity();}},updateArrowOpacity:function(){this.setLeftArrowOpacity();this.setRightArrowOpacity();},setArrowOpacity:function(arrow,isShown){if(isShown){arrow.show();}else{arrow.hide();}},setLeftArrowOpacity:function(){var isNotFirstPage=!!this.currentPage;this.setArrowOpacity(this.pageLeftButton,isNotFirstPage);},setRightArrowOpacity:function(){var isNotLastPage=(this.currentPage<this.numberOfPages-1);this.setArrowOpacity(this.pageRightButton,isNotLastPage);}});BLIP.Class.create("BLIP.Unit.PosterCard",BLIP.Unit,function(config){BLIP.Unit.call(this,config);},{selector:".PosterCard",init:function(){this.initContents();this.initEvents();},initContents:function(){this.actionTab=new BLIP.Unit.ActionTab({domRoot:this.domRoot.children(".ActionTab")});this.actionTab.setShowPageUrl(this.domRoot.data("show-page-url"));
BLIP.Utils.upgradeToRetina(this.domRoot);},initEvents:function(){var thisContext=this;this.domRoot.unbind();this.domRoot.hover(this.delegate(this.onHoverIn),this.delegate(this.onHoverOut));this.domRoot.find(".ArrowIcon").click(this.delegate(this.closeInfo));this.domRoot.delegate("a","click",this.delegate(function(event){if($("#Content").hasClass("Search")){event.preventDefault();$(window).trigger("searchposter.click",{link:$(event.currentTarget),originalEvent:event});}}));},onHoverIn:function(){this.inTimeout=setTimeout(this.delegate(this.openInfo),600);this.actionTab.onPosterHover();},onHoverOut:function(){clearTimeout(this.inTimeout);this.closeInfo();},openInfo:function(){this.domRoot.addClass("Active");},closeInfo:function(){this.domRoot.removeClass("Active");}});BLIP.Class.create("BLIP.Unit.ActionTab",BLIP.Unit,function(config){BLIP.Unit.call(this,config);},{selector:".ActionTab",init:function(){this.initContents();this.initEvents();this.checkedStatus=false;},initContents:function(){var thisContext=this;
this.initFollowButton();this.initLoveButton();this.shareButton=new BLIP.Unit.Modal.SocialShareActions({domRoot:this.domRoot.find(".SocialActions")});this.domRoot.find(".ActionTabMenu .SocialActions").click(function(){thisContext.fireEvent("share.open",{context:thisContext.getAnalyticsContext()});});},setShowPageUrl:function(showPageUrl){this.shareButton.setAnalyticsUrl([showPageUrl,"/poster-card-share-modal"].join(""));},initEvents:function(){this.domRoot.unbind();this.addEventListener("followmodal.close",this.delegate(this.resetStatus));},initFollowButton:function(){if(this.domRoot.find(".Follow").length>0){this.followButton=new BLIP.Unit.FollowButton.LazyFollowButton({domRoot:this.domRoot.find(".Follow"),showId:this.domRoot.data("show-id")});}},initLoveButton:function(){if(this.domRoot.find(".Love").length>0){this.loveButton=new BLIP.Unit.LoveButton.LazyLoveButton({domRoot:this.domRoot.find(".Love"),episodeId:this.domRoot.data("episode-id")});}},onPosterHover:function(){if(this.followButton&&!this.checkedStatus){this.followButton.detectFollowStatus();
this.checkedStatus=true;}},onEpisodeHover:function(){if(this.loveButton&&!this.checkedStatus){this.loveButton.detectLoveStatus();this.checkedStatus=true;}},resetStatus:function(){this.checkedStatus=false;if(this.followButton){this.followButton.setFollowStatus(false);}}});BLIP.Class.create("BLIP.Unit.ConditionalScroll",BLIP.Unit,function(config){this.config=config;BLIP.Unit.call(this,config);},{selector:".ConditionalScroll",deferredUnits:{},init:function(){this.deferredUnits=this.config.subUnits;this.initEventListeners();},initEventListeners:function(){var thisContext=this,didScroll=false;$(window).scroll(function(){didScroll=true;});setInterval(function(){if(didScroll){didScroll=false;thisContext.onPageScroll();}},250);},loadUrl:function(url,callback){$.ajax({url:url,success:function(data){callback(data);},error:function(data){}});},loadDeferredUnit:function(){var thisContext=this;this.loadUrl(this.domRoot.attr("data-url"),function(data){thisContext.domRoot.append(data);thisContext.initSubUnit(thisContext.deferredUnits[0]);
});},onPageScroll:function(event){var win=$(window);if(win.scrollTop()+win.height()>$(this.domRoot).offset().top-200){win.unbind("scroll");this.loadDeferredUnit();}}});BLIP.Class.create("BLIP.Unit.TheaterLite",BLIP.Unit,function(config){this.config=config;BLIP.Unit.call(this,config);},{selector:"#TheaterLite",init:function(){this.initContents();this.initPlayer();this.initEvents();this.config.countdownDisabled=true;this.preventAutoplay=false;},initContents:function(){this.endcap=this.initSubUnit(BLIP.Unit.EpisodeEndcap.EpisodeEndcapLite).single();},initPlayer:function(){try{var playerContainer=this.domRoot.find("#PlayerEmbed");this.player=this.domRoot.find("embed")[0]||this.domRoot.find("object")[0];this.playerHeight=this.player.getAttribute("height");this.playerWidth=this.player.getAttribute("width");this.playerAspectRatio=this.playerWidth/this.playerHeight;this.playerContainerWidth=playerContainer.width();}catch(x){}},initEvents:function(){var thisContext=this;this.initPlayerEvents();$(document).bind("mousemove",this.delegate(this.mouse_onMove));
this.endcap.contentLoaded.addListener(this.endcap_onContentLoaded,this);this.addEventListener("player.paused",this.delegate(this.onPlayerPaused));this.addEventListener("player.playing",this.delegate(this.onPlayerPlaying));this.addEventListener("WindowBracketChange",this.delegate(this.onWindowBracketChange));},endcap_onContentLoaded:function(){this.endcap.show();},initPlayerEvents:function(){var onPostMessage=this.delegate(function(event){if(event.origin.indexOf("blip.tv")<0&&event.origin.indexOf("pokkari.net")<0){return;}if(event.data==="player.complete"){this.fireEvent("episodeFinished");}});if(window.addEventListener){window.addEventListener("message",onPostMessage);}else{window.addEventListener("onpostmessage",onPostMessage);}this.addEventListener("episodeFinished",this.delegate(this.player_onPlaybackFinish));this.addEventListener("playbackStart",this.delegate(this.player_onPlaybackStart));this.addEventListener("adDisplaying:preroll",this.delegate(this.player_onPrerollStart));},player_onPlaybackStart:function(){var thisContext=this;
thisContext.playing=true;setTimeout(function(){thisContext.startFadeoutTimer();},5000);},player_onPlaybackFinish:function(){this.domRoot.find("iframe").hide();this.endcap.load();},player_onPrerollStart:function(){_Analytics.trackAction("preroll-displaying");},sidebar_onActionTaken:function(){this.cancelFadeoutTimer();},mouse_onMove:function(){this.cancelFadeoutTimer();},onPlayerPaused:function(){this.playing=false;this.cancelFadeoutTimer();},onPlayerPlaying:function(){this.playing=true;this.startFadeoutTimer();},cancelFadeoutTimer:function(){clearTimeout(this.fadeTimeout);if(this.fade){this.fade=false;this.fireEvent("fadeIn");}if(this.playing){this.startFadeoutTimer(5000);}},startFadeoutTimer:function(time){var thisContext=this;clearTimeout(this.fadeTimeout);thisContext.fadeTimeout=setTimeout(function(){thisContext.fade=true;thisContext.fireEvent("goingDim");},time?time:10000);},onWindowBracketChange:function(bracket){}});BLIP.Class.create("BLIP.Unit.SocialMediaSection",BLIP.Unit,function(config){BLIP.Unit.call(this,config);
},{selector:"#SocialMediaSection",displayFor:10000,init:function(){this.isModalOpen=false;this.shareButton=new BLIP.Unit.Modal.SocialShareActions({domRoot:$(this.selector).find("a[rel=ShareModal]")});this.initEventListeners();},initEventListeners:function(){this.addEventListener("facebookEdgeCreate",this.delegate(this.displayLikeShow));this.shareButton.onModalOpen.addListener(this.delegate(this.on_modalOpen));this.shareButton.onModalClose.addListener(this.delegate(this.on_modalClose));},on_modalOpen:function(){this.isModalOpen=true;},on_modalClose:function(){this.isModalOpen=false;},displayLikeShow:function(response){if($("#PageInfo").attr("data-posts-id")){$("#FacebookLikeThisShow,#FacebookListThisShowNub").fadeIn();$("body").click(function(){$("#FacebookLikeThisShow,#FacebookListThisShowNub").fadeOut();});$("#FacebookLikeThisShow,#FacebookListThisShowNub").click(function(e){e.stopPropagation();});setTimeout(function(){$("#FacebookLikeThisShow,#FacebookListThisShowNub").fadeOut();},this.displayFor);
}}});BLIP.Class.create("BLIP.Unit.Content.Episode",BLIP.Unit.Content,function(config){BLIP.Unit.Content.call(this,{name:"Episode"});},{init:function(){BLIP.Page.AnalyticsCategory="episode-page";this.initContents();this.initEventListeners();this.initAnalytics();},initContents:function(){var thisContext=this,iframe=this.domRoot.find(".EpisodePlayer iframe"),onPostMessage=function(event){if(event.origin.indexOf("blip.tv")<0&&event.origin.indexOf("pokkari.net")<0){return;}thisContext.on_nextVideoPlaying(event,event.data.video);};this.followButton=this.initSubUnit(BLIP.Unit.FollowButton);this.copyLinks=this.initSubUnit(BLIP.Unit.CopyLink);this.initSubUnit(BLIP.Unit.EpisodeCard);if(window.postMessage){if(window.addEventListener){window.addEventListener("message",onPostMessage);}else{if(window.attachEvent){window.attachEvent("onpostmessage",onPostMessage);}}}else{iframe.bind("load",function(){try{iframe[0].contentWindow.$(iframe[0].contentWindow).bind("player.videoPlaying",thisContext.delegate(thisContext.on_nextVideoPlaying));
}catch(x){}});}},on_nextVideoPlaying:function(ev,episodeData){if(parseInt(episodeData.id,10)!==parseInt($("#PageInfo").data("posts-id"),10)){window.location=episodeData.permalink;}},on_beforePlayNext:function(){if(this.comments.areCommentsOpen||this.social.isModalOpen){this.theater.preventAutoplay=true;}},initAnalytics:function(){var showName=this.followButton.showName=$(".Titles .ShowName span").html(),thisContext=this;$("a.EpisodeArchive, a.EpisodeArchiveLink").click(function(event){var element=this;event.preventDefault();thisContext.fireEvent("archive.click",{context:thisContext.getAnalyticsContext($(element)),link:$(element)});});},initEventListeners:function(){var thisContext=this;$("#TumblrShare").click(function(ev){thisContext.fireEvent("tumblr.post",$("#PageInfo").data("show-name")+" | "+$("#PageInfo").data("episode-title"));window.open($(this).data("href"),"Tumblr_ShareWindow","innerHeight=430,innerWidth=450,scrollbars=no");ev.preventDefault();ev.stopPropagation();return false;
});$("#TwitterShare").click(function(ev){thisContext.fireEvent("twitter.tweet",$("#PageInfo").data("show-name")+" | "+$("#PageInfo").data("episode-title"));window.open($(this).data("href"),"Twitter_ShareWindow","innerHeight=242,innerWidth=400,scrollbars=no,dependent=yes");ev.preventDefault();ev.stopPropagation();return false;});},getState:function(){return{Content:"Episode"};},setState:function(state){},getStateURI:function(state){return"/episode/"+state.episodeState;}});BLIP.Class.create("BLIP.Unit.Content.EpisodeLite",BLIP.Unit.Content,function(config){BLIP.Unit.Content.call(this,{name:"EpisodeLite"});},{init:function(){$(document.body).css({"min-width":940});this.initContents();this.initEventListeners();},initContents:function(){this.theater=this.initSubUnit(BLIP.Unit.TheaterLite).single();this.copyLinks=this.initSubUnit(BLIP.Unit.CopyLink);this.initSubUnit(BLIP.Unit.EpisodeCard);this.followButton=this.initSubUnit(BLIP.Unit.FollowButton);this.conditionalScroll=this.initSubUnit(BLIP.Unit.ConditionalScroll,{subUnits:[BLIP.Unit.BlipPicks]});
},initEventListeners:function(){var thisContext=this;$("#TumblrShare").click(function(ev){thisContext.fireEvent("tumblr.post",$("#PageInfo").data("show-name")+" | "+$("#PageInfo").data("episode-title"));window.open($(this).data("href"),"Tumblr_ShareWindow","innerHeight=430,innerWidth=450,scrollbars=no");ev.preventDefault();ev.stopPropagation();return false;});$("#TwitterShare").click(function(ev){thisContext.fireEvent("twitter.tweet",$("#PageInfo").data("show-name")+" | "+$("#PageInfo").data("episode-title"));window.open($(this).data("href"),"Twitter_ShareWindow","innerHeight=242,innerWidth=400,scrollbars=no,dependent=yes");ev.preventDefault();ev.stopPropagation();return false;});},getState:function(){return{Content:"EpisodeLite"};},setState:function(state){},getStateURI:function(state){return"/episode/"+state.episodeState;}});BLIP.Class.create("BLIP.PlayerControls.PlayerControls",BLIP.Object,function(config){var thisContext=this;this.config=config||{};BLIP.Object.call(this,config);thisContext.initialize();
},{defaultTarget:"#PlayerEmbed",liteTarget:".PlayerEmbedLite",devStratos:"http://new.blip.tv/scripts/flash/stratos.swf",prodStratos:"http://a.blip.tv/scripts/flash/stratos.swf",seekTimeout:1000,minBufferWidth:16,initialize:function(){this.lite=!!$(".EpisodeLite").length;this.flashPlayer=this.config.player;this.initFlashHarness();this.initEventListeners();},getDuration:function(){try{return parseInt(this.flashPlayer.getPlaylist()[0].time,10);}catch(x){return 0;}},initFlashHarness:function(){try{this.flashPlayer.addJScallback("playback_start","controls.onFlashPlaybackStart");this.flashPlayer.addJScallback("player_state_change","controls.onFlashPlayerStateChange");this.flashPlayer.addJScallback("ad_displaying","controls.onFlashAdDisplaying");this.flashPlayer.addJScallback("current_time_change","controls.onFlashTimeChanged");this.flashPlayer.addJScallback("complete","controls.onFlashPlaylistCompleted");this.flashPlayer.addJScallback("complete","controls.onFlashComplete");}catch(x){this.log(x);
}},onFlashComplete:function(){this.fireEvent("episodeFinished");},onFlashPlaybackStart:function(){this.duration=parseInt(this.flashPlayer.getPlaylist()[0].time,10);this.playbackHasStarted=true;this.fireEvent("playbackStart");},onFlashPlayerStateChange:function(state){switch(state){case"playerPaused":this.fireEvent("player.paused");break;case"playing":this.fireEvent("player.playing");break;}},onFlashAdInitialized:function(adType){this.fireEvent("adStarted:"+adType);},onFlashAdDisplaying:function(adType){this.fireEvent("adDisplaying:"+adType);},onFlashAdTimeChange:function(){this.fireEvent("adTimeChanged");},onFlashAdEnded:function(){this.fireEvent("adEnded");},onFlashTimeChanged:function(newTime){this.currentTime=newTime;if(!this.hasStarted){this.hasStarted=true;this.fireEvent("startedPlaying");}if(this.currentTime/this.duration>=0.8){this.fireEvent("eightyPercentPlayed");}if(this.currentTime>20&&!this.hasReachedTwentySeconds){this.hasReachedTwentySeconds=true;this.fireEvent("player.twentySecondsPlayed");
}if(this.eightyPercentHasPlayed&&this.currentTime/this.duration<0.8){this.eightyPercentHasPlayed=false;}if(Math.floor(this.currentTime)<10){$("#Theater .ShareTimer .Count").html(10-Math.floor(this.currentTime));}this.fireEvent("timeChanged");},onFlashBuffer:function(){},onFlashVolumeChanged:function(){},onFlashAdExpanded:function(){this.fireEvent("adExpanded");},onFlashPlaylistCompleted:function(){this.fireEvent("episodeFinished");},onCaptionsChanged:function(){},initEventListeners:function(){this.addEventListener("goingDim",this.delegate(this.onGoingDim));this.addEventListener("fadeIn",this.delegate(this.onFadeIn));this.addEventListener("eightyPercentPlayed",this.delegate(this.onEightyPercentPlayed));this.addEventListener("pause",this.delegate(this.onPause));this.addEventListener("newFeed",this.delegate(this.onNewFeed));},onNewFeed:function(feed){this.sendEvent("newFeed",feed);},onPause:function(){this.sendEvent("pause");},onGoingDim:function(){},onFadeIn:function(){},onEightyPercentPlayed:function(){if(!this.eightyPercentHasPlayed){this.eightyPercentHasPlayed=true;
}},sendEvent:function(event,data){try{this.flashPlayer.sendEvent(event,data);}catch(x){}}});var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);
ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)];}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac};}(),k=function(){if(!M.w3){return;}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f();}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false);}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f();}});if(O==top){(function(){if(J){return;}try{j.documentElement.doScroll("left");}catch(X){setTimeout(arguments.callee,0);return;}f();})();}}if(M.wk){(function(){if(J){return;}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return;}f();})();}s(f);}}();function f(){if(J){return;
}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z);}catch(aa){return;}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]();}}function K(X){if(J){X();}else{U[U.length]=X;}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false);}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false);}else{if(typeof O.attachEvent!=D){i(O,"onload",Y);}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y();};}else{O.onload=Y;}}}}}function h(){if(T){V();}else{H();}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)];}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return;}}X.removeChild(aa);Z=null;H();})();}else{H();}}function H(){var ag=o.length;if(ag>0){for(var af=0;
af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa);}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class");}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align");}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value");}}P(ai,ah,Y,ab);}else{p(ae);if(ab){ab(aa);}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z;}ab(aa);}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y;}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z;}}}return X;
}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312);}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null;}else{l=ae;Q=X;}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310";}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137";}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac;}else{ab.flashvars=ac;}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae);}else{setTimeout(arguments.callee,10);}})();}u(aa,ab,X);}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");
Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y);}else{setTimeout(arguments.callee,10);}})();}else{Y.parentNode.replaceChild(g(Y),Y);}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML;}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true));}}}}}return aa;}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X;}if(aa){if(typeof ai.id==D){ai.id=Y;}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae];}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"';}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"';}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />';
}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id);}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac]);}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac]);}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab]);}}aa.parentNode.replaceChild(Z,aa);X=Z;}}return X;}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa);}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y);}else{setTimeout(arguments.callee,10);}})();}else{X.parentNode.removeChild(X);}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null;}}Y.parentNode.removeChild(Y);}}function c(Z){var X=null;try{X=j.getElementById(Z);}catch(Y){}return X;
}function C(X){return j.createElement(X);}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y];}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false;}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return;}var aa=j.getElementsByTagName("head")[0];if(!aa){return;}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null;}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1];}G=X;}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y);}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"));}}}function w(Z,X){if(!m){return;}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y;}else{v("#"+Z,"visibility:"+Y);}}function L(Y){var Z=/[\\\"<>\.;]/;
var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y;}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2]);}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa]);}for(var Y in M){M[Y]=null;}M=null;for(var X in swfobject){swfobject[X]=null;}swfobject=null;});}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false);}else{if(Z){Z({success:false,id:ab});}}},getObjectById:function(X){if(M.w3){return z(X);}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al];}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak];}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai];
}else{am.flashvars=ai+"="+Z[ai];}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true);}X.success=true;X.ref=an;}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return;}else{w(ah,true);}}if(ac){ac(X);}});}else{if(ac){ac(X);}}},switchOffAutoHideShow:function(){m=false;},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]};},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X);}else{return undefined;}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y);}},removeSWF:function(X){if(M.w3){y(X);}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X);}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1];}if(aa==null){return L(Z);}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)));}}}return"";},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);
if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block";}}if(E){E(B);}}a=false;}}};}();BLIP.Class.create("BLIP.Embedder.Embedder",BLIP.Object,function(config){if(!config){throw"No config object passed in!";}if(!config.postsID&&!config.file){throw'Required param "postsID" or "file" is missing!';}if(!config.swfLocation){throw'Required param "swfLocation" is missing!';}if(!config.shoggLocation){throw'Required param "shoggLocation" is missing!';}if(!config.siteURL){throw'Required param "siteURL" is missing!';}if(!config.width){throw'Required param "width" is missing!';}if(!config.height){throw'Required param "height" is missing!';}if(!config.target){throw'Required param "target" is missing!';}config.wmode=config.wmode?config.wmode:"transparent";config.allowFullScreen=config.allowFullScreen?config.allowFullScreen:"true";config.allowScriptAccess=config.allowScriptAccess?config.allowScriptAccess:"always";config.objectName=config.objectName?config.objectName:"video_player_object";config.embedID=config.embedID?config.embedID:"video_player_embed";
config.adprovider=config.spaceID?"yahoo":"auditude";config.useShogg=config.useShogg?config.useShogg:false;config.file=config.file?config.file:config.siteURL+"/rss/flash/"+config.postsID;config.src=config.swfLocation+"#file="+config.file;config.isIE=navigator.appName.indexOf("Microsoft")!==-1?true:false;config.ios=/iPhone|iPad|iPod/.test(navigator.userAgent)||config.ios?true:false;config.ipad=/iPad/.test(navigator.userAgent)?true:false;config.android=/Android/.test(navigator.userAgent)||config.android?true:false;config.defaultParams=config.defaultParams===false?false:true;config.skipFacebookLike=config.skipFacebookLike===true?true:false;this.config=config;this.setEmbedParams();},{setEmbedParams:function(){if(!this.config.defaultParams){return;}if(this.config.ios){this.addEmbedParam("width",this.config.width);this.addEmbedParam("height",this.config.height);this.addEmbedParam("nativecontrols","true");this.addEmbedParam("onsite","true");}else{this.addEmbedParam("autostart","true");this.addEmbedParam("showinfo","false");
this.addEmbedParam("onsite","true");this.addEmbedParam("nopostroll","true");this.addEmbedParam("noendcap","true");this.addEmbedParam("captionson","true");this.addEmbedParam("showsharebutton","false");this.addEmbedParam("removebrandlink","true");this.addEmbedParam("page","episode");this.addEmbedParam("skin","BlipClassic");this.addEmbedParam("backcolor","0x000000");this.addEmbedParam("frontcolor","0x999999");this.addEmbedParam("lightcolor","0xAAAAAA");this.addEmbedParam("floatcontrols","true");this.addEmbedParam("fixedcontrols","true");this.addEmbedParam("largeplaybutton","true");this.addEmbedParam("controlsalpha",".8");this.addEmbedParam("autohideidle","6000");this.addEmbedParam("utm_campaign",this.config.utm_campaign);this.addEmbedParam("adprovider",this.config.adprovider);this.addEmbedParam("referrer",this.config.siteURL);}},getPlayerObject:function(){return this.config.isIE?window[this.config.objectName]:document.getElementById(this.config.embedID);},addEmbedParam:function(name,value){this.config.src+="&"+name+"="+value;
},initialize:function(){if(this.config.noAutoPlay===true){this.defaultFlashVars.autoplay="false";}},embed:function(){if(this.config.isIE){$("#"+this.config.target).remove();document.write(this.getEmbedCode());}else{$("#"+this.config.target).html(this.getEmbedCode());}this.initPlayer();},getEmbedCode:function(){if(this.config.ios){if(this.config.useShogg&&this.config.ipad){return this.getShoggPlayerEmbedCode();}else{return this.getIOSEmbedCode();}}else{if(this.config.android){return this.getAndroidEmbedCode();}else{return this.getObjectTagEmbedCode();}}},initPlayer:function(){if(this.config.ios){if(this.config.useShogg){this.initShoggPlayer();}}else{this.initFlashPlayer();}},initFlashPlayer:function(){var thisContext=this;window.onStratosReady=function(id){var player=thisContext.getPlayerObject();window.controls=new BLIP.PlayerControls.PlayerControls({target:document.getElementById(thisContext.config.target),skipPlayerControls:true,skipFacebookLike:thisContext.config.skipFacebookLike,player:player});
window.stratosIsReady=true;BLIP.Object.prototype.fireEvent("stratos.ready");};},initShoggPlayer:function(){var thisContext=this;window.addEventListener("load",function(){var player=new BLIP.ShoggPlayer.Player({"parent":thisContext.config.target,"options":thisContext.config.src});player.addEventListener("playerReady",function(){thisContext.fireEvent("shoggPlayerReady");});},true);},getShoggPlayerEmbedCode:function(){return'<script type="text/javascript" src="'+this.config.shoggLocation+'"><\/script>';},getAndroidEmbedCode:function(){var url=this.config.siteURL+"/play?posts_id="+this.config.postsID+"&force_android=1";return'<video src="'+url+'" width="'+this.config.width+'" height="'+this.config.height+'" onclick="this.play();"></video>';},getIOSEmbedCode:function(){var url=this.config.siteURL+"/play?posts_id="+this.config.postsID+"&force_ios=1";return'<video src="'+url+'" width="'+this.config.width+'" height="'+this.config.height+'" allowfullscreen controls x-webkit-airplay="allow" airplay="allow"></video>';
},getEmbedTagEmbedCode:function(){var embed='<embed id="'+this.config.embedID+'" '+'height="'+this.config.height+'" '+'width="'+this.config.width+'" '+'src="'+this.config.src+'" '+'allowfullscreen="'+this.config.allowFullScreen+'" '+'allowscriptaccess="'+this.config.allowScriptAccess+'" '+'wmode="'+this.config.wmode+'" '+'type="application/x-shockwave-flash">'+"</embed>";return embed;},getObjectTagEmbedCode:function(){var ieTags='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '+'codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" '+'width="'+this.config.width+'" '+'height="'+this.config.height+'" '+'id="'+this.config.objectName+'" '+'name="'+this.config.objectName+'" '+'allowfullscreen="'+this.config.allowFullScreen+'" '+'allowscriptaccess="'+this.config.allowScriptAccess+'">'+'<param name="movie" value="'+this.config.src+'"/>'+'<param name="allowscriptaccess" value="'+this.config.allowScriptAccess+'"/>'+'<param name="allowfullscreen" value="'+this.config.allowFullScreen+'"/>'+'<param name="quality" value="best"/>'+'<param name="wmode" value="'+this.config.wmode+'"/>'+this.getEmbedTagEmbedCode()+"</object>";
return ieTags;}});