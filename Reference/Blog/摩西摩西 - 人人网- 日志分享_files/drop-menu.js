// 头部个人主页下拉菜单 
object.define("xn/site-nav/drop-menu-profile","dom",function(e,t,n){function u(){i.addClass("menu-title-active"),s.addClass("nav-drop-menu-active")}function a(){i.removeClass("menu-title-active"),s.removeClass("nav-drop-menu-active")}function f(){o&&(clearTimeout(o),o=null)}var r=e("dom"),i=r.id("profileMenuActive"),s=r.id("navProfileDropMenu"),o=null;t.init=function(){if(!i||!s)return;setTimeout(function(){i.topNavhovered&&u()},200)},i.addEvent("mouseover",function(){f(),u()}),i.addEvent("mouseout",function(){f(),o=setTimeout(function(){a()},200)}),s.addEvent("mouseover",function(){f(),u()}),s.addEvent("mouseout",function(){f(),o=setTimeout(function(){a()},200)})}),object.define("xn/site-nav/drop-menu-app","dom",function(e,t,n){function f(e,t){return e.length>t?e.substring(0,t):e}function l(){s.setStyle("display","block"),i.addClass("menu-title-active")}function c(){s.hide(),i.removeClass("menu-title-active")}function h(){o&&(clearTimeout(o),o=null)}var r=e("dom"),i=r.id("showAppMenu"),s=r.id("appsMenuWrap"),o=null,u=null,a=!1;t.init=function(){if(!i||!s)return;a||(s.innerHTML="<img src='http://a.xnimg.cn/imgpro/bg/o_loading.gif' style='display:block;margin:10px auto;' />",l()),new XN.net.xmlhttp({url:"http://apps.renren.com/navbar/getNavHtmlNew",method:"get",onSuccess:function(e){a=!0;var t=e.responseText;if(!/recentUse/.test(t))s.addClass("nav-app-drop-menu-a-v2"),s.innerHTML=t;else{s.innerHTML=t;var n=Sizzle("#appsMenuWrap .recentUse .appname"),r=Sizzle("#appsMenuWrap .recentUse .recIcon .appname");for(var o=0;o<n.length;o++)n[o].innerHTML=f(n[o].innerHTML,6);for(var c=0;c<r.length;c++)r[c].innerHTML=f(r[c].innerHTML,5)}u=setTimeout(function(){i.topNavhovered&&l(),i.removeEvent("mouseout",arguments.callee),u=null},200)},onError:function(e){}})},i.addEvent("mouseover",function(){h(),l()}),i.addEvent("mouseout",function(){h(),o=setTimeout(function(){c()},200)}),s.addEvent("mouseover",function(){h(),l()}),s.addEvent("mouseout",function(){h(),o=setTimeout(function(){c()},200)})});